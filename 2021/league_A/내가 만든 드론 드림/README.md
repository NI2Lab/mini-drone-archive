# 미니 드론 경진 대회 
## 내가 만든 드론 드림
    [⌛ 드론 캠으로 실시간 영상을 프레임 단위로 받아 영상처리 및 드론제어]

***

### [✔ 대회 진행 전략]

- 대회 시작 전 영상 처리 스터디 진행
- 팀 결성 및 워크샵 직후 바로 팀 회의 진행
- 과제 부여시 미리 각자 분담한 부분 수행 및 팀장 최종 체크 후 제출
- 본선 맵을 임의로 만들어 드론으로 실제 테스트하면서 진행
- 링통과 여부 체크 및 cut-off 시간 체크 
- 링 통과시 빠른 통과 및 다음 단계 진행을 위한 코드 최적화
  * 우승
     + 아롱이가 좋아하는 뒷풀이

***

### [✔ 알고리즘 설명]
1. 임계값 설정 및 크로마키 컬러 픽셀 개수를 측정하여 링의 대략적인 중심으로 이동
* 크로마키 천, 표식 색깔들에 대한 임계값 범위를 미리 설정.
* 드론 캠으로 영상을 프레임 단위로 받아 크로마키 컬러의 hsv에 해당되는 모든 값들을 검출.
* 프레임을 사분면으로 각각 나누어 특정 사분면에 크로마키 hsv값이 검출되지 않으면 드론을 이동시켜 모든 사분면에 크로마키 hsv가 존재하도록 조정.
2. 원을 검출하고 검출되지 않으면 크로마키의 컬러부분이 사분면에 골고루 분포하도록 세부적인 이동수행
* 원이 검출되면 해당 부분을 채우고 기존 이미지와 비교하여 원 부분에 해당하는 픽셀을 흰색으로 칠함.
* 원이 검출 되지 않으면 각 사분면에 분포하는 크로마키 픽셀값을 비교하여 드론을 미세하게 이동
3. 원의 중점을 탐색, 드론의 카메라 중점 좌표와 비교하면서 드론을 이동시켜 원의 중심으로 이동
* 흰색으로 칠한 원 부분의 픽셀값들을 더하고 해당 픽셀 개수로 나누어 원의 중점 좌표를 구함.
* 현재 드론 캠의 중점좌표값과 해당 원의 중점 좌표값의 차이를 비교하여 캠의 중점좌표가 링의 중점좌표로 이동하도록 드론을 미세하게 이동.
4. 전진 알고리즘
* 링의 중점에 드론이 위치하면 링을 통과하기 위해 전진시킴.
* 전진하면서 표식의 hsv값과 픽셀 개수를 탐색
* 표식의 픽셀개수가 일정 개수 이상이 되면 드론을 정지
5. 표식 컬러를 검출하여 색깔에 따른 동작 수행
* 해당 표식의 hsv값을 읽어 빨간색 표식이면 좌회전, 보라색 표식이면 착지 수행.

***

### [✔ 소스 코드 설명]
1. 임계값 설정

2. 사분면에서 각각 크로마키 컬러hsv 값 검출 및 위치 조정

3. 원 미검출시 재조정

4. 원 검출시 중점 탐색

5. 원 중점과 드론 중점 좌표 차이 비교하여 원 중점으로 드론 이동

6. 드론 전진 및 링 통과

7. 표식 색깔 픽셀 검출 및 드론 행동 제어.


