2022 ë¯¸ë‹ˆë“œë¡  ê²½ì§„ëŒ€íšŒ 18-DroneBoy íŒ€
====
ì´ ê¸€ì€ [2022 ë¯¸ë‹ˆë“œë¡  ê²½ì§„ëŒ€íšŒ](http://mini-drone.co.kr/view_notice?post_id=16481977576163440691612387)ì— ì°¸ê°€í•œ
18-DroneBoy íŒ€ì˜ ëŒ€íšŒì¤€ë¹„ ê³¼ì •ì„ ê¸°ë¡í•œ ê²°ê³¼ë¬¼ì´ë‹¤.

----
ğŸˆ ì¤€ë¹„
====
ì½”ë“œì„¤ëª…ì— ë“¤ì–´ê°€ê¸° ì•ì„œ ì¤€ë¹„ëœ í•˜ë“œì›¨ì–´ì  ìš”ì†Œë“¤ì„ ì‚´í´ë³´ì.  
* ì‚¬ìš©ê¸°ì²´  
DJI Tello ë¯¸ë‹ˆë“œë¡ ì„ ì´ìš©í•˜ì˜€ë‹¤.

![tello](https://user-images.githubusercontent.com/102723228/178655561-3c8f5806-bc1b-486a-b8db-ebadbc10210b.png)
<img src="![tello](https://user-images.githubusercontent.com/102723228/178655561-3c8f5806-bc1b-486a-b8db-ebadbc10210b.png)">



* í™˜ê²½êµ¬ì¶•  
ì‘ì„±ëœ ì½”ë“œë¥¼ ì ìš©í•´ë³´ê¸° ìœ„í•œ í™˜ê²½ì´ í•„ìš”í–ˆë‹¤. [ì£¼ì–´ì§„ ë§µì˜ ê·œê²©ê³¼ ê³ ë ¤ì‚¬í•­](http://mini-drone.co.kr/view_notice?post_id=16566445069343700497480829)ì„ í† ëŒ€ë¡œ ìµœëŒ€í•œ ëŒ€íšŒí™˜ê²½ê³¼ ìœ ì‚¬í•˜ê²Œ êµ¬ì„±í•˜ì˜€ë‹¤.
ì¥ì†ŒëŠ” í•™êµ ê°•ì˜ì‹¤ì„ ë¹Œë ¸ê³ , í•„ìš”í•œ ë¬¼í’ˆì€ êµ¬ë§¤í•˜ì—¬ ì„¸íŒ…í•˜ì˜€ë‹¤.

![hong](https://user-images.githubusercontent.com/102723228/178643254-b4e66851-ecc6-4fc4-9793-32a0e628670b.jpg)
<img src="![hong](https://user-images.githubusercontent.com/102723228/178643466-71bf2aaf-c2a5-4618-a451-1859624eac76.jpg)">
![KakaoTalk_20220713_174139855_01](https://user-images.githubusercontent.com/102723228/178691157-db95d935-a87a-45d0-85ee-3e0597e30f8d.jpg)
<img src="![KakaoTalk_20220713_174139855_01](https://user-images.githubusercontent.com/102723228/178691157-db95d935-a87a-45d0-85ee-3e0597e30f8d.jpg)">


ğŸˆ ëŒ€íšŒì§„í–‰ì „ëµ
====

2022 ë¯¸ë‹ˆë“œë¡  ê²½ì§„ëŒ€íšŒì—ì„œ ìš°ë¦¬ íŒ€ì˜ ì „ëµì€ ë¹ ë¥¸ì‹œê°„ ë‚´ì— ë¶ˆê·œì¹™ì ì¸ ì¥ì• ë¬¼ì„ í†µê³¼í•˜ëŠ” ê²ƒì´ ëª©ì ì´ë‹¤. ì´ë¥¼ ìœ„í•´ matlabì—ì„œ ì œê³µí•˜ëŠ” image processing toolboxë¥¼ ì‚¬ìš©í•˜ì—¬  rgb2hsv, imcrop, regionprops í•¨ìˆ˜ ë“±ìœ¼ë¡œ ì´ë¯¸ì§€ ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•˜ì˜€ë‹¤. 

ì „ì²´ì ì¸ ê³¼ì •ìœ¼ë¡œ ìš°ì„  takeoff ì´í›„ ì¹´ë©”ë¼ ì „ë°©ì— ìˆëŠ” ì²œë§‰ ë‚´ x,y ì§ê²½ì„ ì¸¡ì •í•˜ì—¬ êµ¬ë©ì„ ë§Œë“ ë‹¤. ë‹¤ìŒìœ¼ë¡œëŠ” ë§Œë“¤ì–´ë‚¸ êµ¬ë©ì„ ì´ìš©í•˜ì—¬ í™”ë©´ìƒ íŠ¹ì •í•œ ìœ„ì¹˜ì— ì¡´ì¬í•˜ë„ë¡ ë“œë¡ ì„ ì œì–´í•œë‹¤. ì´í›„ì— ê°€ê¹Œì›Œì¡Œë‹¤ê³  ì¸ì‹í•˜ë©´ êµ¬ë© ë„ˆë¨¸ì˜ í‘œì‹ì„ ì¸ì‹í•˜ì—¬ í†µê³¼í•˜ê³  íšŒì „ì„ë¬´ë¥¼ ìˆ˜í–‰í•œë‹¤. 

ì½”ë“œë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•œ ê³µê°„ì„ ë§ˆë ¨í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ì¥ë¹„(ì²œë§‰, ë´‰) êµ¬ë§¤ì™€ ê°•ì˜ì‹¤ì„ ëŒ€ì—¬í•˜ì—¬ í™˜ê²½ì„ êµ¬ì¶•í•˜ì˜€ë‹¤. ì£¼ì–´ì§„ ì‘ì—…í™˜ê²½ì—ì„œ ì½”ë”© í›„ ì¦‰ì‹œ ì ìš©í•´ê°€ë©° ì´ìƒì ì¸ ê°’ê³¼ ì‹¤ì œ ì ìš©í•œ ê°’ê³¼ì˜ ì˜¤ì°¨ë¥¼ ì¤„ì—¬ë‚˜ê°”ë‹¤. 




ğŸˆ ì•Œê³ ë¦¬ì¦˜ ì„¤ëª…
====
1. ê¸°ê¸°ì˜ ê°ì²´ ì„ ì–¸ ë° takeoff ì§„í–‰í•œë‹¤.
2. íŒŒë€ìƒ‰ ì²œë§‰ ì¸ì‹ ë° êµ¬ë©ì„ ì´ë¯¸ì§€ ì²˜ë¦¬í•œ í›„ ë“œë¡  ì¹´ë©”ë¼ì— í‘œì‹œë˜ëŠ” êµ¬ë©ì˜ ìœ„ì¹˜ì— ë”°ë¼ ë“œë¡ ì´ ì „ì§„ê³¼ ë™ì‹œì— ìƒí•˜ì¢Œìš°ë¡œ ì œì–´í•œë‹¤.
3. êµ¬ë©ì— ì¶©ë¶„íˆ ê°€ê¹Œì›Œì¡Œë‹¤ê³  íŒë‹¨ë˜ë©´ êµ¬ë©ì„ ì´ìš©í•œ ì œì–´ëŠ” ë©ˆì¶”ê³  ì´í›„ì˜ í‘œì‹ì„ ì¸ì‹í•œë‹¤. 
4. ì¸ì‹í•œ í‘œì‹ê¹Œì§€ ì „ì§„í•œ í›„, íšŒì „ ì„ë¬´ë¥¼ ìˆ˜í–‰í•œë‹¤. (2ë‹¨ê³„ì—ì„œ 2-3ë²ˆì„ ë°˜ë³µì§„í–‰)

* ì „ì²´ì ì¸ ì•Œê³ ë¦¬ì¦˜ ì§„í–‰ê³¼ì •  

![image](https://user-images.githubusercontent.com/102723228/178747877-fcfcfaeb-a0a3-43b5-b3a0-c08d92a91fa4.png)
<img src="![image](https://user-images.githubusercontent.com/102723228/178747917-946ea54e-9268-43e1-8956-d269f9ecd91a.png)">

5. 3ë‹¨ê³„ì—ì„œ ì¥ì• ë¬¼ ì•ìœ¼ë¡œ ì´ë™í•œ í›„ í‘œì‹ì„ ì •ë©´ìœ¼ë¡œ ì¸ì‹í•˜ê¸° ìœ„í•´ Yaw ê¸°ë™ì„ ì§„í–‰í•œë‹¤.  
* Yaw ê¸°ë™ì„ í•˜ì§€ ì•Šì„ ì‹œ  

![image](https://user-images.githubusercontent.com/102723228/178748806-26703589-4542-49f2-a58e-3de0df25e08d.png)
<img src="![image](https://user-images.githubusercontent.com/102723228/178748806-26703589-4542-49f2-a58e-3de0df25e08d.png)">  

ë“œë¡ ì´ ì •ë©´ì— ìˆì§€ ì•Šì•„, í‘œì‹ì„ ì •í™•íˆ ì¸ì‹í•  ìˆ˜ ì—†ë‹¤.

* Yaw ê¸°ë™ ì§„í–‰ ì‹œ  

![image](https://user-images.githubusercontent.com/102723228/178749527-418580cb-87ab-4367-ac2f-3b6c52f00282.png)
<img src="![image](https://user-images.githubusercontent.com/102723228/178749555-b5d74f89-2b4b-49e1-808f-16ffccc5cdf2.png)">  

ë“œë¡ ì´ ì¥ì• ë¬¼ê³¼ í‰í–‰í•˜ê²Œ ë§Œë“¤ì–´ êµ¬ë©í†µê³¼ ì´í›„ í‘œì‹ì„ ì¸ì‹í•˜ì—¬ ë‹¤ìŒ ì„ë¬´ë¥¼ ìˆ˜í–‰í•˜ë„ë¡ í•œë‹¤.  

6. Yaw ê¸°ë™ì´ ëë‚œ ë“œë¡ ì´ ì¹´ë©”ë¼ í™”ë©´ì„ 4ë¶„ë©´ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ê° ì‚¬ë¶„ë©´ì— ë“¤ì–´ì˜¤ëŠ” blue screen í”½ì…€ ê°’ì„ ì´ìš©í•˜ì—¬ Droneì„ ì œì–´  
* ì´ë¡ ê³¼ì •  

![image](https://user-images.githubusercontent.com/102723228/178752299-95c6673c-a4d8-4993-a064-faa66b2b0d97.png)
<img src="![image](https://user-images.githubusercontent.com/102723228/178752299-95c6673c-a4d8-4993-a064-faa66b2b0d97.png)">  


* í™”ë©´ì„ ì‚¬ë¶„ë©´ìœ¼ë¡œ ë‚˜ëˆ„ê³  ê° ì‚¬ë¶„ë©´ìœ¼ë¡œ ë“¤ì–´ì˜¤ëŠ” blue screen dataë¥¼ ì´ì§„í™”ì‹œì¼œ ìƒí•˜ì¢Œìš° ë“œë¡  ë°©í–¥ì„ ì œì–´  

![image](https://user-images.githubusercontent.com/102723228/178752569-e03c3da7-fbe0-468b-aef8-47e6f4ff50bf.png)
<img src="![image](https://user-images.githubusercontent.com/102723228/178752569-e03c3da7-fbe0-468b-aef8-47e6f4ff50bf.png)">  

* ì˜ˆì‹œ 1)  
![image](https://user-images.githubusercontent.com/102723228/178753224-809d906d-38ec-4834-b136-0930d6bfd71a.png)
<img src="![image](https://user-images.githubusercontent.com/102723228/178753239-3431cad4-e5a7-47f7-825a-d899c2c31099.png)">  

* ì˜ˆì‹œ 2)  
![image](https://user-images.githubusercontent.com/102723228/178753293-a9a1bdec-31df-44f9-ab24-030d592a6ff8.png)
<img src="![image](https://user-images.githubusercontent.com/102723228/178753324-fa542fef-55f9-4cdc-9c72-b490ec1013b2.png)">  

* ì˜ˆì‹œ 3)  
![image](https://user-images.githubusercontent.com/102723228/178753513-2029dd37-45f8-4603-92b1-96d488978383.png)
<img src="![image](https://user-images.githubusercontent.com/102723228/178753469-7f22d1a0-3af7-4e6c-9cb3-61d6edc20704.png)">  

* ì˜ˆì‹œ 4)  
![image](https://user-images.githubusercontent.com/102723228/178753646-299c1a34-ee60-4b16-8d25-4cf71293b3db.png)
<img src="![image](https://user-images.githubusercontent.com/102723228/178753662-102424d9-74a7-4bd7-8900-35ab8eaaf3c7.png)">  


ğŸˆ ì†ŒìŠ¤ì½”ë“œ ì„¤ëª…
====
ì†ŒìŠ¤ì½”ë“œëŠ” ì•ì„œ ì„¤ëª…í•œ ì•Œê³ ë¦¬ì¦˜ì— ë”°ë¼ ìˆœì°¨ì ìœ¼ë¡œ ì‘ì„±í•˜ì˜€ë‹¤. ë” ìƒì„¸í•œ ì„¤ëª…ì€ ê° ì½”ë“œë³„ ì£¼ì„ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

----
1. ê¸°ê¸°ì˜ ê°ì²´ ì„ ì–¸ ë° takeoff
<pre>
clc; clear;
detection = false;
%% ë³€ìˆ˜ ì„ ì–¸
count = 0;

%HSV ê°’ ì„¤ì •
blu_h_min = 0.55; blu_h_max = 0.7; blu_s_min = 0.5; blu_s_max = 0.9;
red_h_min1 = 0; red_h_max1 = 0.05; red_h_min2 = 0.95; red_h_max2 = 1; red_s_min = 0.8; red_s_max = 1;
gre_h_min = 0.34; gre_h_max = 0.45; gre_s_min = 0.4; gre_s_max = 1;
pur_h_min = 0.7; pur_h_max = 0.85; pur_s_min = 0.5; pur_s_max = 1;

%% ê°ì²´ ì„ ì–¸  
drone = ryze(); %ë“œë¡  ê°ì²´ ì„ ì–¸
cam = camera(drone); %ì¹´ë©”ë¼ ê°ì²´ ì„ ì–¸

%% Main í•¨ìˆ˜
takeoff(drone);
</pre>
-------------
2. êµ¬ë© ì´ë¯¸ì§€ ë° êµ¬ë© ìœ„ì¹˜ì— ë”°ë¼ ì¼ì •í•œ ì‹œê°„ê°„ê²©ìœ¼ë¡œ ì „ì§„í•˜ëŠ” ë“œë¡ ì„ ìƒí•˜ì¢Œìš°ë¡œ ì œì–´
<pre>
for mission = 1:3
    if mission == 1
        disp('ë¯¸ì…˜ 1 ìˆ˜í–‰ì¤‘');
    
    elseif mission == 2
        disp('ë¯¸ì…˜ 2 ìˆ˜í–‰ì¤‘');
        
    elseif mission == 3
        disp('ë¯¸ì…˜ 3 ìˆ˜í–‰ì¤‘');  
    end
 
    %% BLUE SCREEN í™•ì¸ í•¨ìˆ˜(Blue Screen Detection)
    while 1
        if mission == 1
            [height, ] = readHeight(drone); %ë“œë¡  í˜„ì¬ ë†’ì´ ë°›ì•„ì˜¤ê¸°
            if abs(height-0.9) > 0.2
                disp('ë†’ì´ ì¡°ì ˆ ì¤‘');
                if height < 0.9
                    moveup(drone,'distance',0.9-height)
                    break;
                else
                    movedown(drone,'distance',height-0.9)
                    break;
                end
            end
       
        
        else
            %ì´ë¯¸ì§€ ì²˜ë¦¬(RGB->HSV)
            frame = snapshot(cam);
            hsv = rgb2hsv(frame);
            h = hsv(:,:,1);
            s = hsv(:,:,2);
            v = hsv(:,:,3);

            blue_screen = (blu_h_min<h)&(h<blu_h_max)&(blu_s_min<s)&(s<blu_s_max); %íŒŒë‘ìƒ‰ ê²€ì¶œ
            circle = imfill(blue_screen,'holes'); %ë¹ˆ ê³µê°„ ì±„ìš°ê¸°

            for x=1:size(blue_screen,1)
                for y=1:size(blue_screen,2)
                    if blue_screen(x,y)==circle(x,y)
                        circle(x,y)=0;  %ë™ì¼í•œ ë¶€ë¶„ì„ 0ìœ¼ë¡œ ì²˜ë¦¬í•¨ìœ¼ë¡œì¨ ì›ë§Œ ì¶”ì¶œ
                    end
                end
            end

            %Hole ì‹ë³„ ì‹œ
            if sum(circle,'all') > 10000
                disp('hole íƒìƒ‰ ì™„ë£Œ! ì´ì œ ì› ë³´ê³  ì œì–´í• ê±°ì„' );
                count = 0;
                break;

            %Hole ë¯¸ì‹ë³„ ì‹œ
            else
                %í™”ë©´ì˜ ì¢Œìš°, ìƒí•˜ë¥¼ ë¹„êµ(imcropí•¨ìˆ˜ë¥¼ ì´ìš©í•˜ì—¬ íŠ¹ì • ì˜ì—­ ì¶”ì¶œ)
                diff_lr = sum(imcrop(blue_screen,[0 0 480 720]),'all') - sum(imcrop(blue_screen,[480 0 480 720]),'all');
                diff_ud = sum(imcrop(blue_screen,[0 0 960 360]),'all') - sum(imcrop(blue_screen,[0 360 960 360]),'all');

                if count == 7
                    moveback(drone, 'distance', 0.4, 'speed', 0.5);
                    disp('Circle Detection : ê¸°ë™ íšŸìˆ˜ ì´ˆê³¼ì— ë”°ë¥¸ ì§ì§„ ë° ì´ˆê¸°í™”');
                    count = 0;

                else
                    %ë¯¸ì…˜ 3ì—ì„œ ì› íƒìƒ‰ì„ ìœ„í•˜ì—¬ 3ë„ì”© íšŒì „í•˜ë©´ì„œ íƒìƒ‰ ì‹œí–‰
                    if mission == 3
                        turn(drone, deg2rad(3));
                        disp('3ë„ íšŒì „');
                        count = count + 1;
                    end

                    %í™”ë©´ì— í‘œì‹œëœ blue_screenì˜ ì¢Œìš°ê°’ ì°¨ì´ë¥¼ ì´ìš©
                    if diff_lr > 30000
                        moveleft(drone,'distance',0.3,'speed',0.5);
                        disp('ì™¼ìª½ìœ¼ë¡œ 0.3m ë§Œí¼ ì´ë™');
                        count = count + 1;

                    elseif diff_lr < -30000
                        moveright(drone,'distance',0.3,'speed',0.5);
                        disp('ì˜¤ë¥¸ìª½ìœ¼ë¡œ 0.3m ë§Œí¼ ì´ë™');
                        count = count + 1;
                    end

                    %í™”ë©´ì— í‘œì‹œëœ blue_screenì˜ ìƒí•˜ê°’ ì°¨ì´ë¥¼ ì´ìš©
                    if diff_ud > 12000
                        moveup(drone,'distance',0.2,'speed',0.5);
                        disp('ìœ„ìª½ìœ¼ë¡œ 0.2m ë§Œí¼ ì´ë™');
                        count = count + 1;

                    elseif diff_ud < -12000
                        movedown(drone,'distance',0.2,'speed',0.5);
                        disp('ì•„ë˜ìª½ìœ¼ë¡œ 0.2m ë§Œí¼ ì´ë™');
                        count = count + 1;
                    end
                end
            end
        end
    end
    
    %% ì› í†µê³¼ í•¨ìˆ˜(Circle Detection)
    while 1
        %ì´ë¯¸ì§€ ì²˜ë¦¬(RGB->HSV)
        frame = snapshot(cam);
        hsv = rgb2hsv(frame);
        h = hsv(:,:,1);
        s = hsv(:,:,2);
        v = hsv(:,:,3);

        blue_screen = (blu_h_min<h)&(h<blu_h_max)&(blu_s_min<s)&(s<blu_s_max); %íŒŒë‘ìƒ‰ ê²€ì¶œ
        fill_screen = imfill(blue_screen,'holes'); %ë¹ˆê³µê°„ ì±„ìš°ê¸°
        circle = fill_screen;

        for x=1:size(blue_screen,1)
            for y=1:size(blue_screen,2)
                if blue_screen(x,y)==circle(x,y)
                    circle(x,y)=0;  %ë™ì¼í•œ ë¶€ë¶„ì„ 0ìœ¼ë¡œ ì²˜ë¦¬í•¨ìœ¼ë¡œì¨ ì›ë§Œ ì¶”ì¶œ
                end
            end
        end

        circle_detect_area = regionprops(circle,'Centroid','Area');
        circle_area = 0;

        for j = 1:length(circle_detect_area)
                if circle_area <= circle_detect_area(j).Area %ê°€ì¥ í° ì˜ì—­ ì¶”ì¶œì„ ìœ„í•˜ì—¬ Areaë¥¼ ì´ìš©í•œ ì²˜ë¦¬
                    circle_area = circle_detect_area(j).Area;
                    circle_center = circle_detect_area(j).Centroid; %ê°€ì¥ í° ì˜ì—­ì˜ ì¤‘ì•™ ì¢Œí‘œê°’ ì¸¡ì •
                end
        end
        
        
         if mission == 1 %ì› í†µê³¼ í›„ ì  ì°¾ê¸°
            break;

        elseif mission == 2
            point = ((red_h_min1<h) & (h<red_h_max1) | (red_h_min2<h) & (h<red_h_max2)) & (red_s_min<s) & (s<=red_s_max);

        elseif mission == 3
            point = (pur_h_min<h) & (h<pur_h_max) & (pur_s_min<s) & (s<=pur_s_max);
        end
        
        point_detect_area = regionprops(point, 'Centroid', 'Area');
        point_area = 0;
        for j = 1:length(point_detect_area)
            if point_area <= point_detect_area(j).Area %ê°€ì¥ í° ì˜ì—­ ì¶”ì¶œì„ ìœ„í•˜ì—¬ Areaë¥¼ ì´ìš©í•œ ì²˜ë¦¬
                point_area = point_detect_area(j).Area;
                point_center = point_detect_area(j).Centroid;
            end
        end

        if circle_area >= 10000
            if (420 <= round(circle_center(1)) && 540 >= round(circle_center(1))) && (200 <= round(circle_center(2)) && 360 >= round(circle_center(2)))

                if circle_area >= 80000
                    disp('Circle Detection : ì¶©ë¶„í•œ í¬ê¸°ì˜ ì› íƒìƒ‰ ì™„ë£Œ, 8ë§Œë„˜ê¹€, ë‹¤ìš´ì‹œë¡œ ì „ì§„í• ê±°ì„.');
                    moveforward(drone, 'distance', 0.5);
                    break;

                else
                    moveforward(drone, 'distance', 0.7, 'speed', 1);
                    disp('Circle Detection : ì¤‘ì‹¬ì€ ë§ì•—ê³  ì›í¬ê¸° ì‘ì•„ì„œ ì›ìœ¼ë¡œ ì ‘ê·¼ ì¤‘');
                end

            elseif 420 > round(circle_center(1))
                moveleft(drone, 'distance', 0.2, 'speed', 0.5);
                disp('Circle Detection : ìì„¸ ì œì–´ë¥¼ ìœ„í•´ ì¢Œì¸¡ìœ¼ë¡œ ì´ë™');

            elseif 540 < round(circle_center(1))
                moveright(drone, 'distance', 0.2, 'speed', 0.5);
                disp('Circle Detection : ìì„¸ ì œì–´ë¥¼ ìœ„í•´ ìš°ì¸¡ìœ¼ë¡œ ì´ë™');

            elseif 200 > round(circle_center(2))
                moveup(drone, 'distance', 0.2, 'speed', 0.5);
                disp('Circle Detection : ìì„¸ ì œì–´ë¥¼ ìœ„í•´ ìœ„ë¡œ ì´ë™');

            elseif 360 < round(circle_center(2))
                movedown(drone, 'distance', 0.2, 'speed', 0.5);
                disp('Circle Detection : ìì„¸ ì œì–´ë¥¼ ìœ„í•´ ì•„ë˜ë¡œ ì´ë™');
            end
        
        else
            moveback(drone, 'distance', 0.3, 'speed', 0.5);
            disp('ìœ¼ì—‘ ë³´ì´ë˜ ì›ì´ ì•ˆë³´ì—¬!! ë’¤ë¡œê°€');
        end
    end
</pre>

----
3. í‘œì‹ ì´ë¯¸ì§€ ì²˜ë¦¬ & ì¸ì‹ ë° íšŒì „ì„ë¬´ ìˆ˜í–‰
<pre>
  %% í‘œì‹ ì°¾ê¸° í•¨ìˆ˜
    while 1
        %ì´ë¯¸ì§€ ì²˜ë¦¬(RGB->HSV)
        frame = snapshot(cam);
        hsv = rgb2hsv(frame);
        h = hsv(:,:,1);
        s = hsv(:,:,2);
        v = hsv(:,:,3);
 
        if mission == 1 %ì› í†µê³¼ í›„ ì  ì°¾ê¸°
            point = (pur_h_min<h) & (h<pur_h_max) & (pur_s_min<s) & (s<=pur_s_max);
        elseif mission == 2
            point = ((red_h_min1<h) & (h<red_h_max1) | (red_h_min2<h) & (h<red_h_max2)) & (red_s_min<s) & (s<=red_s_max);

        elseif mission == 3
            point = (pur_h_min<h) & (h<pur_h_max) & (pur_s_min<s) & (s<=pur_s_max);
        end
            point_detect_area = regionprops(point, 'Centroid', 'Area');
            point_area = 0;
            for j = 1:length(point_detect_area)
                if point_area <= point_detect_area(j).Area %ê°€ì¥ í° ì˜ì—­ ì¶”ì¶œì„ ìœ„í•˜ì—¬ Areaë¥¼ ì´ìš©í•œ ì²˜ë¦¬
                    point_area = point_detect_area(j).Area;
                    point_center = point_detect_area(j).Centroid;
                end
            end
            
            
            if sum(point, 'all') >= 200
                detection = true;
                if sum(point, 'all') > 2000
                    if mission == 1
                        disp('Marker Detection : ë¯¸ì…˜ 1 í‘œì‹ ê°ì§€');
                        turn(drone, deg2rad(90));
                        moveforward(drone, 'distance', 0.4);
                        break;
                        
                    elseif mission == 2
                        disp('Marker Detection : ë¯¸ì…˜ 2 í‘œì‹ ê°ì§€');
                        turn(drone, deg2rad(90));
                        moveforward(drone, 'distance', 1, 'speed', 1);
                        turn(drone, deg2rad(30));
                        moveleft(drone, 'distance', 0.3, 'speed', 1);
                        moveback(drone, 'distance', 0.4, 'speed', 0.5);
                        break;
                        
                    elseif mission == 3
                        disp('ë¯¸ì…˜ 3 í‘œì‹ ê°ì§€');
                        land(drone);
                        disp('ë¯¸ì…˜ ì¢…ë£Œ');
                        break;
                    end
                    
                    
                elseif 200 < sum(point, 'all') && sum(point, 'all') < 1200
                    if point_center(1) < 280
                        moveleft(drone, 'distance', 0.22, 'speed', 0.5);
                        disp('Marker Detection : ì¢Œì¸¡ìœ¼ë¡œ ì´ë™');
                    elseif point_center(1) > 680
                        moveright(drone, 'distance', 0.22, 'speed', 0.5);
                        disp('Marker Detection : ìš°ì¸¡ìœ¼ë¡œ ì´ë™');
                    elseif point_center(2) > 360
                        movedown(drone, 'distance', 0.22, 'speed', 0.5);
                        disp('Marker Detection : ì•„ë˜ë¡œ ì´ë™');
                        
                    elseif 280 <= point_center(1) && point_center(1) <= 680 && point_center(2) <= 360
                        moveforward(drone, 'distance', 0.5, 'speed', 1);
                        disp('Marker Detection : ì „ì§„');
                    else
                        moveback(drone, 'distance', 0.3, 'speed', 1);
                        disp('Marker Detection : í›„ì§„');

                    end
                         
                elseif 1200 <= sum(point, 'all') && sum(point, 'all') <= 2000
                    moveforward(drone, 'distance', 0.5, 'speed', 1);  
                    disp('Marker Detection : ì „ì§„');
                    
                end
                
            elseif sum(point, 'all') < 100 && detection == true
                moveback(drone, 'distance', 0.2, 'speed', 1);
                disp('ì¸ì‹ëë‹¤ê°€ ê°‘ìê¸° ì•ˆë¼ ë’¤ë¡œê°ˆê²Œ~~');
                detection = false;
                
            else
                moveforward(drone, 'distance', 0.3);
                disp('ë§ˆì»¤ 300 ë¯¸ë§Œì´ë¼ì„œ ë¬´í•œ ì§ì§„');
                
              
            end
    end
end
</pre>
----
